
<!DOCTYPE html>
<html>
<head>
    <title>PXPay Token è‡ªå‹•æ¸¬è©¦é é¢</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        #result, #error, #status { margin-top: 20px; }
        #result { color: green; }
        #error { color: red; }
        #status { color: blue; }
        pre { background: #f4f4f4; padding: 10px; border: 1px solid #ccc; }
    </style>
    <script type="text/javascript">
        function setupWebViewJavascriptBridge(callback) {
            if (window.WebViewJavascriptBridge) {
                return callback(WebViewJavascriptBridge);
            }
            document.addEventListener(
                'WebViewJavascriptBridgeReady',
                function() {
                    callback(WebViewJavascriptBridge);
                },
                false
            );
        }

        window.onload = function() {
            document.getElementById('status').innerText = 'â³ ç­‰å¾… WebViewJavascriptBridge åˆå§‹åŒ–...';

            setupWebViewJavascriptBridge(function(bridge) {
                document.getElementById('status').innerText = 'âœ… WebViewJavascriptBridge å·²åˆå§‹åŒ–';

                try {
                    bridge.callHandler('getpayload', null, function(response) {
                        if (response && response.token) {
                            document.getElementById('result').innerText = 'âœ… PXPay Token: ' + response.token;
                        } else {
                            document.getElementById('result').innerText = 'âš ï¸ å·²å‘¼å« getpayloadï¼Œä½†æœªæ”¶åˆ° tokenã€‚';
                            document.getElementById('error').innerText = 'å›å‚³å…§å®¹ï¼š' + JSON.stringify(response);
                        }
                    });
                } catch (e) {
                    document.getElementById('result').innerText = 'âŒ å‘¼å«å¤±æ•—';
                    document.getElementById('error').innerText = 'éŒ¯èª¤è¨Šæ¯: ' + e.message;
                }
            });
        }
    </script>
</head>
<body>
    <h1>PXPay Token è‡ªå‹•æ¸¬è©¦ï¼ˆé™¤éŒ¯ç‰ˆï¼‰</h1>
    <p id="status">â³ åˆå§‹åŒ–ä¸­...</p>
    <p id="result"></p>
    <p id="error"></p>
    <h3>ğŸ“‹ é™¤éŒ¯è³‡è¨Šï¼ˆè«‹è¤‡è£½ä»¥ä¸‹å…§å®¹å›å ±ï¼‰</h3>
    <pre id="debugOutput"></pre>
</body>
</html>
